<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div id="app">
        <div>
            <span>用户名：</span>
            <span>
                <input type="text" v-model.lazy="uname">
            </span>
            <span>{{tip}}</span>
        </div>
    </div>

    <script src="../lib/vue-3.0.js"></script>

    <script>
        let vm = Vue.createApp({
            //数据
            data() {
                return {
                    uname: '',
                    tip: ''
                }
            },

            //方法
            methods: {
                checkNmae(uname) {
                    var that = this
                    setTimeout(function () {
                        if (uname == '肖进') {
                            that.tip = '用户名已存在'
                        } else {
                            that.tip = '用户名可用'
                        }
                    },2000)
                }
            },
            // //注意
            // 绑定定时器，
            // 如果没有使用箭头函数，那么this的指向就会变成window全局，所以需要定义
            // 一个变量来指向this(数据)
            // 如果用的是箭头函数，那么箭头函数就会自动指向上一级的指向，所以不用定义this变量

            //监听输入名字
            watch: {
                uname: function (val) {
                    this.tip = '正在验证中……'
                    this.checkNmae(val)
                }
            }

        }).mount('#app')
    </script>
</body>

</html>